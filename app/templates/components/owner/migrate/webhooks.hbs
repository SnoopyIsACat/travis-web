{{#repository-filter
  repositories=repositories
  as |filter|
}}

  {{#component filter.form as |form|}}
    <div class="profile-repositories-filter">
      {{component form.searchField
        placeholder="Filter repositories"
        title="Filter repositories"
      }}
    </div>
  {{/component}}

  <div>

    {{#if filter.isLoading}}
      {{loading-indicator}}
    {{else}}

      {{#travis-form as |form| }}
        <ul class="profile-repositorylist">
          {{#each filter.results as |repository|}}

            <li class="profile-repolist-item">
              {{#form.field
                disableFrame=true
                value=(contains repository selectedRepositories)
                onChange=(action 'toggleRepository' repository)
                as |field|
              }}
                {{#field.checkbox}}
                  {{repository-visibility-icon repository=repository}}
                  <span class="profile-repo">
                    {{compute filter.computeName repository.name filter.query}}
                  </span>
                {{/field.checkbox}}
              {{/form.field}}
            </li>

          {{else}}

            {{#if filter.isFiltering}}
              <li class="no-results">Sorry, no results found.</li>
            {{else}}
              <li>Sorry, it seems like we couldn't find any repositories you have access to on GitHub.</li>
            {{/if}}

          {{/each}}
        </ul>
      {{/travis-form}}

    {{/if}}
  </div>

  {{#unless filter.isLoading }}
    {{#if isOrganization}}
      {{pagination-navigation collection=repositories route="organization.migrate.webhooks" inner=6 outer=2}}
    {{else}}
      {{pagination-navigation collection=repositories route="account.migrate.webhooks" inner=6 outer=2}}
    {{/if}}
  {{/unless}}

{{/repository-filter}}

<button
  disabled={{not selectedRepositories.length}}
  class="button--blue migrate--submit {{unless selectedRepositories.length 'disabled'}}"
>
  Enable selected repositories on GitHub Apps
</button>
